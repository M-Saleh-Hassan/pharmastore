(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{ZJzk:function(n,t,e){"use strict";e.r(t);var l=e("8Y7J");class i{}var a=e("pMnS"),s=e("jXVt"),r=e("tKwJ");class u{constructor(){this.tabs=[{title:"Cities",icon:"map",route:"/admin/data/cities"},{title:"Areas",icon:"pin",route:"/admin/data/areas"}]}ngOnInit(){}}var c=l.Hb({encapsulation:2,styles:[],data:{}});function o(n){return l.fc(0,[(n()(),l.Jb(0,0,null,null,5,"nb-card",[],[[2,"size-tiny",null],[2,"size-small",null],[2,"size-medium",null],[2,"size-large",null],[2,"size-giant",null],[2,"status-primary",null],[2,"status-info",null],[2,"status-success",null],[2,"status-warning",null],[2,"status-danger",null],[2,"accent",null],[2,"accent-primary",null],[2,"accent-info",null],[2,"accent-success",null],[2,"accent-warning",null],[2,"accent-danger",null]],null,null,s.J,s.s)),l.Ib(1,49152,null,0,r.jb,[],null,null),(n()(),l.Jb(2,0,null,1,3,"nb-card-body",[],null,null,null,s.I,s.r)),l.Ib(3,49152,null,0,r.ib,[],null,null),(n()(),l.Jb(4,0,null,0,1,"nb-route-tabset",[["fullWidth",""]],[[2,"full-width",null]],null,null,s.T,s.C)),l.Ib(5,49152,null,0,r.Wc,[],{tabs:[0,"tabs"],fullWidth:[1,"fullWidth"]},null)],(function(n,t){n(t,5,0,t.component.tabs,"")}),(function(n,t){n(t,0,1,[l.Vb(t,1).tiny,l.Vb(t,1).small,l.Vb(t,1).medium,l.Vb(t,1).large,l.Vb(t,1).giant,l.Vb(t,1).primary,l.Vb(t,1).info,l.Vb(t,1).success,l.Vb(t,1).warning,l.Vb(t,1).danger,l.Vb(t,1).hasAccent,l.Vb(t,1).primaryAccent,l.Vb(t,1).infoAccent,l.Vb(t,1).successAccent,l.Vb(t,1).warningAccent,l.Vb(t,1).dangerAccent]),n(t,4,0,l.Vb(t,5).fullWidthValue)}))}function b(n){return l.fc(0,[(n()(),l.Jb(0,0,null,null,1,"ngx-general-data",[],null,null,null,o,c)),l.Ib(1,114688,null,0,u,[],null,null)],(function(n,t){n(t,1,0)}),null)}var d=l.Fb("ngx-general-data",u,b,{},{},[]),m=e("CcMi"),h=e("DjsD"),f=e("4Esg"),g=e("KP+3");class p{constructor(n,t){this.helperService=n,this.generalDataService=t,this.source=new h.a,this.errors={},this.isErrorExist=!1}ngOnInit(){this.setTable(),this.getAllCities()}getAllCities(){this.isLoading=!0,this.generalDataService.getCities(1,0).subscribe(n=>{this.source.load(n.data.items),this.isLoading=!1})}setTable(){this.lang=localStorage.getItem("lang"),this.tableSettings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmCreate:!0},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},actions:{columnTitle:"ar"===this.lang?"\u0645\u0641\u0627\u062a\u064a\u062d":"Actions"},noDataMessage:"ar"===this.lang?"\u0644\u0645 \u0646\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a":"No data found",columns:{name_ar:{title:"ar"===this.lang?"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0639\u0631\u0628\u064a":"Arabic Name",sort:!1,filter:!1},name_en:{title:"ar"===this.lang?"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a":"English Name",sort:!1,filter:!1}}}}onCreateConfirm(n){this.generalDataService.createCity(n.newData).subscribe(t=>{1===t.status&&n.confirm.resolve(t.data)})}onEditConfirm(n){this.generalDataService.updateCity(n.newData.id,n.newData).subscribe(t=>{1===t.status&&n.confirm.resolve(t.data)})}onDeleteConfirm(n){window.confirm(this.lang?"\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0627\u0644\u062d\u0630\u0641\u061f":"Are you sure you want to delete?")?this.deteteItem(n):n.confirm.reject()}deteteItem(n){this.generalDataService.deleteCity(n.data.id).subscribe(t=>{1===t.status&&n.confirm.resolve()})}checkData(n,t){this.errors={},this.isErrorExist=!1;const e=t.newData;this.errors={},this.isErrorExist=!1,["name_ar","name_en"].forEach(n=>{e[n]||(this.errors[n]="required-data",this.isErrorExist=!0)}),this.isErrorExist?this.showErrors():"create"===n?this.onCreateConfirm(t):"update"===n&&this.onEditConfirm(t)}showErrors(){for(const n in this.errors)this.errors.hasOwnProperty(n)&&this.helperService.showTranslatedToast("warning",this.errors[n],n)}}var C=l.Hb({encapsulation:2,styles:[],data:{}});function V(n){return l.fc(0,[(n()(),l.Jb(0,16777216,null,null,9,"nb-card",[["nbSpinnerSize","giant"],["nbSpinnerStatus","primary"]],[[2,"size-tiny",null],[2,"size-small",null],[2,"size-medium",null],[2,"size-large",null],[2,"size-giant",null],[2,"status-primary",null],[2,"status-info",null],[2,"status-success",null],[2,"status-warning",null],[2,"status-danger",null],[2,"accent",null],[2,"accent-primary",null],[2,"accent-info",null],[2,"accent-success",null],[2,"accent-warning",null],[2,"accent-danger",null],[2,"nb-spinner-container",null]],null,null,s.J,s.s)),l.Ib(1,49152,null,0,r.jb,[],null,null),l.Ib(2,81920,null,0,r.qd,[l.fb,l.m,l.Q,l.q],{spinnerStatus:[0,"spinnerStatus"],spinnerSize:[1,"spinnerSize"],nbSpinner:[2,"nbSpinner"]},null),(n()(),l.Jb(3,0,null,0,6,"nb-card-header",[],null,null,null,s.L,s.u)),l.Ib(4,49152,null,0,r.mb,[],null,null),(n()(),l.Jb(5,0,null,0,4,"div",[["class","container-fluid"]],null,null,null,null,null)),(n()(),l.Jb(6,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(n()(),l.Jb(7,0,null,null,2,"div",[["class","col-12 overflow-auto"]],null,null,null,null,null)),(n()(),l.Jb(8,0,null,null,1,"ng2-smart-table",[],null,[[null,"deleteConfirm"],[null,"editConfirm"],[null,"createConfirm"]],(function(n,t,e){var l=!0,i=n.component;return"deleteConfirm"===t&&(l=!1!==i.onDeleteConfirm(e)&&l),"editConfirm"===t&&(l=!1!==i.checkData("update",e)&&l),"createConfirm"===t&&(l=!1!==i.checkData("create",e)&&l),l}),m.b,m.a)),l.Ib(9,573440,null,0,h.s,[],{source:[0,"source"],settings:[1,"settings"]},{deleteConfirm:"deleteConfirm",editConfirm:"editConfirm",createConfirm:"createConfirm"})],(function(n,t){var e=t.component;n(t,2,0,"primary","giant",e.isLoading),n(t,9,0,e.source,e.tableSettings)}),(function(n,t){n(t,0,1,[l.Vb(t,1).tiny,l.Vb(t,1).small,l.Vb(t,1).medium,l.Vb(t,1).large,l.Vb(t,1).giant,l.Vb(t,1).primary,l.Vb(t,1).info,l.Vb(t,1).success,l.Vb(t,1).warning,l.Vb(t,1).danger,l.Vb(t,1).hasAccent,l.Vb(t,1).primaryAccent,l.Vb(t,1).infoAccent,l.Vb(t,1).successAccent,l.Vb(t,1).warningAccent,l.Vb(t,1).dangerAccent,l.Vb(t,2).isSpinnerExist])}))}function S(n){return l.fc(0,[(n()(),l.Jb(0,0,null,null,1,"ngx-cities",[],null,null,null,V,C)),l.Ib(1,114688,null,0,p,[f.a,g.a],null,null)],(function(n,t){n(t,1,0)}),null)}var v=l.Fb("ngx-cities",p,S,{},{},[]),w=e("SVse");class y{constructor(n,t){this.helperService=n,this.generalDataService=t,this.source=new h.a,this.allCities=[],this.isDoneIntianting=0,this.errors={},this.isErrorExist=!1}ngOnInit(){this.setTable(),this.getAllAreas()}getAllAreas(){this.generalDataService.getAreas(1,0).subscribe(n=>{this.source.load(n.data.items),this.isDoneIntianting++})}setTable(){this.lang=localStorage.getItem("lang"),this.tableSettings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmCreate:!0},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},noDataMessage:"ar"===this.lang?"\u0644\u0645 \u0646\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a":"No data found",actions:{columnTitle:"ar"===this.lang?"\u0645\u0641\u0627\u062a\u064a\u062d":"Actions"},columns:{name_ar:{title:"ar"===this.lang?"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0639\u0631\u0628\u064a":"Arabic Name",sort:!1,filter:!1},name_en:{title:"ar"===this.lang?"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a":"English Name",sort:!1,filter:!1},city_id:{title:"ar"===this.lang?"\u0627\u0644\u0645\u062f\u064a\u0646\u0629":"City",type:"html",sort:!1,filter:!1,editor:{type:"list",config:{list:this.getAllCities()}},valuePrepareFunction:(n,t)=>this.prepareValue(t)}}}}onCreateConfirm(n){this.generalDataService.createArea(n.newData).subscribe(t=>{1===t.status&&n.confirm.resolve(t.data)})}onEditConfirm(n){this.generalDataService.updateArea(n.newData.id,n.newData).subscribe(t=>{1===t.status&&n.confirm.resolve(t.data)})}onDeleteConfirm(n){window.confirm(this.lang?"\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0627\u0644\u062d\u0630\u0641\u061f":"Are you sure you want to delete?")?this.deteteItem(n):n.confirm.reject()}deteteItem(n){this.generalDataService.deleteArea(n.data.id).subscribe(t=>{1===t.status&&n.confirm.resolve()})}getAllCities(){this.generalDataService.getCities(0,0).subscribe(n=>{let t=0;n.data.items.forEach(e=>{this.allCities.push({value:e.id,title:"en"===this.lang?e.name_en:e.name_ar}),t++,t===n.data.items.length&&(this.tableSettings.columns.city_id.editor.config.list=this.allCities,this.isDoneIntianting++)})})}prepareValue(n){if(n.city_id){const t=this.allCities.find(t=>t.value.toString()===n.city_id.toString());return t?t.title:null}return null}checkData(n,t){this.errors={},this.isErrorExist=!1;const e=t.newData;this.errors={},this.isErrorExist=!1,["name_ar","name_en","city_id"].forEach(n=>{e[n]||(this.errors[n]="required-data",this.isErrorExist=!0)}),this.isErrorExist?this.showErrors():"create"===n?this.onCreateConfirm(t):"update"===n&&this.onEditConfirm(t)}showErrors(){for(const n in this.errors)this.errors.hasOwnProperty(n)&&this.helperService.showTranslatedToast("warning",this.errors[n],n)}}var D=l.Hb({encapsulation:2,styles:[],data:{}});function T(n){return l.fc(0,[(n()(),l.Jb(0,0,null,null,1,"ng2-smart-table",[],null,[[null,"deleteConfirm"],[null,"editConfirm"],[null,"createConfirm"]],(function(n,t,e){var l=!0,i=n.component;return"deleteConfirm"===t&&(l=!1!==i.onDeleteConfirm(e)&&l),"editConfirm"===t&&(l=!1!==i.checkData("update",e)&&l),"createConfirm"===t&&(l=!1!==i.checkData("create",e)&&l),l}),m.b,m.a)),l.Ib(1,573440,null,0,h.s,[],{source:[0,"source"],settings:[1,"settings"]},{deleteConfirm:"deleteConfirm",editConfirm:"editConfirm",createConfirm:"createConfirm"})],(function(n,t){var e=t.component;n(t,1,0,e.source,e.tableSettings)}),null)}function A(n){return l.fc(0,[(n()(),l.Jb(0,16777216,null,null,9,"nb-card",[["nbSpinnerSize","giant"],["nbSpinnerStatus","primary"]],[[2,"size-tiny",null],[2,"size-small",null],[2,"size-medium",null],[2,"size-large",null],[2,"size-giant",null],[2,"status-primary",null],[2,"status-info",null],[2,"status-success",null],[2,"status-warning",null],[2,"status-danger",null],[2,"accent",null],[2,"accent-primary",null],[2,"accent-info",null],[2,"accent-success",null],[2,"accent-warning",null],[2,"accent-danger",null],[2,"nb-spinner-container",null]],null,null,s.J,s.s)),l.Ib(1,49152,null,0,r.jb,[],null,null),l.Ib(2,81920,null,0,r.qd,[l.fb,l.m,l.Q,l.q],{spinnerStatus:[0,"spinnerStatus"],spinnerSize:[1,"spinnerSize"],nbSpinner:[2,"nbSpinner"]},null),(n()(),l.Jb(3,0,null,0,6,"nb-card-header",[],null,null,null,s.L,s.u)),l.Ib(4,49152,null,0,r.mb,[],null,null),(n()(),l.Jb(5,0,null,0,4,"div",[["class","container-fluid"]],null,null,null,null,null)),(n()(),l.Jb(6,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(n()(),l.Jb(7,0,null,null,2,"div",[["class","col-12 overflow-auto"]],null,null,null,null,null)),(n()(),l.yb(16777216,null,null,1,null,T)),l.Ib(9,16384,null,0,w.l,[l.fb,l.Z],{ngIf:[0,"ngIf"]},null)],(function(n,t){var e=t.component;n(t,2,0,"primary","giant",2!=e.isDoneIntianting),n(t,9,0,2==e.isDoneIntianting)}),(function(n,t){n(t,0,1,[l.Vb(t,1).tiny,l.Vb(t,1).small,l.Vb(t,1).medium,l.Vb(t,1).large,l.Vb(t,1).giant,l.Vb(t,1).primary,l.Vb(t,1).info,l.Vb(t,1).success,l.Vb(t,1).warning,l.Vb(t,1).danger,l.Vb(t,1).hasAccent,l.Vb(t,1).primaryAccent,l.Vb(t,1).infoAccent,l.Vb(t,1).successAccent,l.Vb(t,1).warningAccent,l.Vb(t,1).dangerAccent,l.Vb(t,2).isSpinnerExist])}))}function E(n){return l.fc(0,[(n()(),l.Jb(0,0,null,null,1,"ngx-areas",[],null,null,null,A,D)),l.Ib(1,114688,null,0,y,[f.a,g.a],null,null)],(function(n,t){n(t,1,0)}),null)}var I=l.Fb("ngx-areas",y,E,{},{},[]),J=e("s7LF"),k=e("TYxm"),z=e("IheW"),x=e("iInd");class _{}e.d(t,"GeneralDataModuleNgFactory",(function(){return B}));var B=l.Gb(i,[],(function(n){return l.Sb([l.Tb(512,l.m,l.rb,[[8,[a.a,d,v,I,s.k]],[3,l.m],l.H]),l.Tb(4608,w.n,w.m,[l.D,[2,w.G]]),l.Tb(4608,J.y,J.y,[]),l.Tb(4608,J.f,J.f,[]),l.Tb(4608,k.i,k.i,[]),l.Tb(4608,k.k,k.k,[z.c]),l.Tb(4608,k.c,k.c,[k.i,k.k]),l.Tb(1073742336,w.b,w.b,[]),l.Tb(1073742336,x.p,x.p,[[2,x.u],[2,x.l]]),l.Tb(1073742336,_,_,[]),l.Tb(1073742336,J.x,J.x,[]),l.Tb(1073742336,J.i,J.i,[]),l.Tb(1073742336,r.ke,r.ke,[]),l.Tb(1073742336,r.bc,r.bc,[r.ac]),l.Tb(1073742336,r.Xc,r.Xc,[]),l.Tb(1073742336,r.nb,r.nb,[]),l.Tb(1073742336,J.t,J.t,[]),l.Tb(1073742336,k.j,k.j,[]),l.Tb(1073742336,h.c,h.c,[]),l.Tb(1073742336,h.D,h.D,[]),l.Tb(1073742336,h.L,h.L,[]),l.Tb(1073742336,h.N,h.N,[]),l.Tb(1073742336,h.h,h.h,[]),l.Tb(1073742336,h.b,h.b,[]),l.Tb(1073742336,r.rd,r.rd,[]),l.Tb(1073742336,i,i,[]),l.Tb(1024,x.j,(function(){return[[{path:"",component:u,children:[{path:"",redirectTo:"cities",pathMatch:"full"},{path:"cities",component:p},{path:"areas",component:y}]}]]}),[])])}))}}]);