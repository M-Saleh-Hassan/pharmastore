(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"4Xmu":function(n,t,e){"use strict";e.d(t,"a",(function(){return r}));var i=e("ToIr"),l=e("8Y7J");let r=(()=>{class n{constructor(n){this.connectionService=n}updateUser(n){return this.connectionService.put("profile/update",n)}}return n.ngInjectableDef=l.jc({factory:function(){return new n(l.kc(i.a))},token:n,providedIn:"root"}),n})()},"KP+3":function(n,t,e){"use strict";e.d(t,"a",(function(){return r}));var i=e("ToIr"),l=e("8Y7J");let r=(()=>{class n{constructor(n){this.connectionService=n}getCities(n,t){return this.connectionService.get(`admin/cities?page=${n}&limit=${t}`)}createCity(n){return this.connectionService.post("admin/cities",n)}updateCity(n,t){return this.connectionService.put(`admin/cities/${n}`,t)}deleteCity(n){return this.connectionService.delete(`admin/cities/${n}`)}getAreas(n,t){return this.connectionService.get(`admin/areas?page=${n}&limit=${t}`)}createArea(n){return this.connectionService.post("admin/areas",n)}updateArea(n,t){return this.connectionService.put(`admin/areas/${n}`,t)}deleteArea(n){return this.connectionService.delete(`admin/areas/${n}`)}getCityAreas(n,t,e){return this.connectionService.get(`store/cities/${n}/areas?page=${t}&limit=${e}`)}}return n.ngInjectableDef=l.jc({factory:function(){return new n(l.kc(i.a))},token:n,providedIn:"root"}),n})()},Kka8:function(n,t,e){"use strict";e.r(t);var i=e("8Y7J");class l{}var r=e("pMnS"),a=e("iInd");class s{constructor(){}ngOnInit(){}}var c=i.Hb({encapsulation:2,styles:[],data:{}});function u(n){return i.fc(0,[(n()(),i.Jb(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),i.Ib(1,212992,null,0,a.q,[a.b,i.fb,i.m,[8,null],i.j],null,null)],(function(n,t){n(t,1,0)}),null)}function o(n){return i.fc(0,[(n()(),i.Jb(0,0,null,null,1,"ngx-stats",[],null,null,null,u,c)),i.Ib(1,114688,null,0,s,[],null,null)],(function(n,t){n(t,1,0)}),null)}var b=i.Fb("ngx-stats",s,o,{},{},[]),d=e("jXVt"),h=e("tKwJ"),m=e("CcMi"),p=e("DjsD"),g=e("u50V"),T=e("vCDP"),f=e("4Esg"),v=e("ToIr");let S=(()=>{class n{constructor(n,t){this.connectionService=n,this.userService=t}getTopItems(n){return this.connectionService.get(`${this.userService.currentUser.role}/items/top100?order_by=${n}`)}}return n.ngInjectableDef=i.jc({factory:function(){return new n(i.kc(v.a),i.kc(g.a))},token:n,providedIn:"root"}),n})();class y{constructor(n,t,e,i,l){this.statsService=n,this.router=t,this.helperService=e,this.pharmacyService=i,this.userService=l,this.source=new p.a,this.itemsList=[]}ngOnInit(){this.getpageType(),this.getTopItems(),this.setTable()}getpageType(){this.orderType=this.router.url.includes("searchs")?"search":"discount"}getTopItems(){this.isLoading=!0,this.statsService.getTopItems(this.orderType).subscribe(n=>{n.data&&(this.itemsList=n.data,this.itemsList.forEach(n=>{n.branchName=n.branch.name,n.storeName=n.store.name,n.storeId=n.store.id,n.name_ar="en"===this.lang?n.name_en:n.name_ar,n.cityName="en"===this.lang?n.city.name_en:n.city.name_ar,n.area_name_ar="en"===this.lang?n.city.area_name_en:n.city.area_name_ar}),this.isLoading=!1,this.source.load(this.itemsList))})}setTable(){this.lang=localStorage.getItem("lang"),this.tableSettings={pager:{perPage:20},edit:{editButtonContent:'<i class="nb-e-commerce"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmSave:!0},actions:{columnTitle:"ar"===this.lang?"\u0645\u0641\u0627\u062a\u064a\u062d":"Actions",add:!1,delete:!1,position:"right"},noDataMessage:"ar"===this.lang?"\u0644\u0645 \u0646\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a":"No data found",columns:{name_ar:{title:"ar"===this.lang?"\u0627\u0644\u0627\u0633\u0645":"Name",sort:!1,filter:!1,editable:!1},basic_price:{title:"ar"===this.lang?"\u0627\u0644\u0633\u0639\u0631":"Price",sort:!1,filter:!1,editable:!1},discount:{title:"ar"===this.lang?"\u0627\u0644\u062e\u0635\u0645":"Discount",sort:!1,filter:!1,editable:!1},storeName:{title:"ar"===this.lang?"\u0627\u0644\u0645\u0648\u0632\u0639":"Store",sort:!1,filter:!1,editable:!1,type:"html",valuePrepareFunction:(n,t)=>'<a target="_blank" href="'+window.location.origin+"/pharmacy/stores/"+t.storeId+'">'+n+"</a>"},branchName:{title:"ar"===this.lang?"\u0627\u0644\u0641\u0631\u0639":"Branch",sort:!1,filter:!1,editable:!1},area_name_ar:{title:"ar"===this.lang?"\u0627\u0644\u0645\u0646\u0637\u0642\u0629":"Area",sort:!1,filter:!1,editable:!1},cityName:{title:"ar"===this.lang?"\u0627\u0644\u0645\u062f\u064a\u0646\u0629":"City",sort:!1,filter:!1,editable:!1}}};const n=this.userService.currentUser.role;"admin"===n?this.tableSettings.actions.edit=!1:"pharmacy"===n&&(this.tableSettings.columns.selectedQuantity={title:"ar"===this.lang?"\u0627\u0644\u0643\u0645\u064a\u0629":"Quantity",sort:!1,filter:!1,editor:{type:"text"}})}buy(n){const t=n.newData;isNaN(t.selectedQuantity)?this.helperService.showTranslatedToast("warning","","Numbers Only"):this.pharmacyService.addToCart({quantity:t.selectedQuantity,item_id:t.id}).subscribe(t=>{n.confirm.resolve(n.data),this.helperService.showTranslatedToast("success","","Item added to cart")})}}var I=i.Hb({encapsulation:0,styles:[[""]],data:{}});function w(n){return i.fc(0,[(n()(),i.Jb(0,0,null,null,11,"nb-card",[],[[2,"size-tiny",null],[2,"size-small",null],[2,"size-medium",null],[2,"size-large",null],[2,"size-giant",null],[2,"status-primary",null],[2,"status-info",null],[2,"status-success",null],[2,"status-warning",null],[2,"status-danger",null],[2,"accent",null],[2,"accent-primary",null],[2,"accent-info",null],[2,"accent-success",null],[2,"accent-warning",null],[2,"accent-danger",null]],null,null,d.J,d.s)),i.Ib(1,49152,null,0,h.jb,[],null,null),(n()(),i.Jb(2,0,null,2,9,"div",[["class","p-lg-5 p-3"]],null,null,null,null,null)),(n()(),i.Jb(3,16777216,null,null,8,"div",[["nbSpinnerSize","giant"],["nbSpinnerStatus","primary"]],[[2,"nb-spinner-container",null]],null,null,null,null)),i.Ib(4,81920,null,0,h.qd,[i.fb,i.m,i.Q,i.q],{spinnerStatus:[0,"spinnerStatus"],spinnerSize:[1,"spinnerSize"],nbSpinner:[2,"nbSpinner"]},null),(n()(),i.Jb(5,0,null,null,6,"nb-card-body",[],null,null,null,d.I,d.r)),i.Ib(6,49152,null,0,h.ib,[],null,null),(n()(),i.Jb(7,0,null,0,4,"div",[["class","container-fluid"]],null,null,null,null,null)),(n()(),i.Jb(8,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(n()(),i.Jb(9,0,null,null,2,"div",[["class","col-12 overflow-auto"]],null,null,null,null,null)),(n()(),i.Jb(10,0,null,null,1,"ng2-smart-table",[],null,[[null,"editConfirm"]],(function(n,t,e){var i=!0;return"editConfirm"===t&&(i=!1!==n.component.buy(e)&&i),i}),m.b,m.a)),i.Ib(11,573440,null,0,p.s,[],{source:[0,"source"],settings:[1,"settings"]},{editConfirm:"editConfirm"})],(function(n,t){var e=t.component;n(t,4,0,"primary","giant",e.isLoading),n(t,11,0,e.source,e.tableSettings)}),(function(n,t){n(t,0,1,[i.Vb(t,1).tiny,i.Vb(t,1).small,i.Vb(t,1).medium,i.Vb(t,1).large,i.Vb(t,1).giant,i.Vb(t,1).primary,i.Vb(t,1).info,i.Vb(t,1).success,i.Vb(t,1).warning,i.Vb(t,1).danger,i.Vb(t,1).hasAccent,i.Vb(t,1).primaryAccent,i.Vb(t,1).infoAccent,i.Vb(t,1).successAccent,i.Vb(t,1).warningAccent,i.Vb(t,1).dangerAccent]),n(t,3,0,i.Vb(t,4).isSpinnerExist)}))}function k(n){return i.fc(0,[(n()(),i.Jb(0,0,null,null,1,"ngx-top-items",[],null,null,null,w,I)),i.Ib(1,114688,null,0,y,[S,a.l,f.a,T.a,g.a],null,null)],(function(n,t){n(t,1,0)}),null)}var V=i.Fb("ngx-top-items",y,k,{},{},[]),J=e("SVse"),C=e("s7LF"),_=e("TYxm"),N=e("IheW"),j=e("TSSN"),A=e("YlHY"),$=e("QQfA"),D=e("IP0z");class z{}var L=e("zMNK"),x=e("/HVE"),M=e("hOhj");e.d(t,"StatsModuleNgFactory",(function(){return Q}));var Q=i.Gb(l,[],(function(n){return i.Sb([i.Tb(512,i.m,i.rb,[[8,[r.a,b,V,d.k]],[3,i.m],i.H]),i.Tb(4608,J.n,J.m,[i.D,[2,J.G]]),i.Tb(4608,C.y,C.y,[]),i.Tb(4608,C.f,C.f,[]),i.Tb(4608,_.i,_.i,[]),i.Tb(4608,_.k,_.k,[N.c]),i.Tb(4608,_.c,_.c,[_.i,_.k]),i.Tb(5120,j.g,A.a,[N.c]),i.Tb(4608,j.d,j.f,[]),i.Tb(4608,j.i,j.e,[]),i.Tb(4608,j.c,j.b,[]),i.Tb(4608,j.k,j.k,[j.l,j.g,j.d,j.i,j.c,j.m,j.o,j.n,j.a]),i.Tb(4608,$.d,$.d,[$.i,$.e,i.m,$.h,$.f,i.z,i.J,J.c,D.b,[2,J.h]]),i.Tb(5120,$.j,$.k,[$.d]),i.Tb(1073742336,J.b,J.b,[]),i.Tb(1073742336,a.p,a.p,[[2,a.u],[2,a.l]]),i.Tb(1073742336,z,z,[]),i.Tb(1073742336,C.x,C.x,[]),i.Tb(1073742336,C.i,C.i,[]),i.Tb(1073742336,h.ke,h.ke,[]),i.Tb(1073742336,h.bc,h.bc,[h.ac]),i.Tb(1073742336,h.nb,h.nb,[]),i.Tb(1073742336,C.t,C.t,[]),i.Tb(1073742336,_.j,_.j,[]),i.Tb(1073742336,p.c,p.c,[]),i.Tb(1073742336,p.D,p.D,[]),i.Tb(1073742336,p.L,p.L,[]),i.Tb(1073742336,p.N,p.N,[]),i.Tb(1073742336,p.h,p.h,[]),i.Tb(1073742336,p.b,p.b,[]),i.Tb(1073742336,j.h,j.h,[]),i.Tb(1073742336,A.b,A.b,[]),i.Tb(1073742336,h.dc,h.dc,[]),i.Tb(1073742336,D.a,D.a,[]),i.Tb(1073742336,L.f,L.f,[]),i.Tb(1073742336,x.b,x.b,[]),i.Tb(1073742336,M.b,M.b,[]),i.Tb(1073742336,$.g,$.g,[]),i.Tb(1073742336,h.pb,h.pb,[]),i.Tb(1073742336,h.ob,h.ob,[]),i.Tb(1073742336,h.Cc,h.Cc,[]),i.Tb(1073742336,h.M,h.M,[]),i.Tb(1073742336,h.Bb,h.Bb,[]),i.Tb(1073742336,h.gd,h.gd,[]),i.Tb(1073742336,h.rd,h.rd,[]),i.Tb(1073742336,l,l,[]),i.Tb(1024,a.j,(function(){return[[{path:"",component:s,children:[{path:"",pathMatch:"full",redirectTo:"top-searchs"},{path:"top-searchs",component:y},{path:"top-discount",component:y}]}]]}),[]),i.Tb(256,j.o,!1,[]),i.Tb(256,j.m,void 0,[]),i.Tb(256,j.n,void 0,[]),i.Tb(256,j.a,void 0,[])])}))}}]);