function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function _createClass(n,e,t){return e&&_defineProperties(n.prototype,e),t&&_defineProperties(n,t),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"4Xmu":function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));var i=t("ToIr"),l=t("8Y7J"),a=function(){var n=function(){function n(e){_classCallCheck(this,n),this.connectionService=e}return _createClass(n,[{key:"updateUser",value:function(n){return this.connectionService.put("profile/update",n)}}]),n}();return n.ngInjectableDef=l.jc({factory:function(){return new n(l.kc(i.a))},token:n,providedIn:"root"}),n}()},"KP+3":function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));var i=t("ToIr"),l=t("8Y7J"),a=function(){var n=function(){function n(e){_classCallCheck(this,n),this.connectionService=e}return _createClass(n,[{key:"getCities",value:function(n,e){return this.connectionService.get("admin/cities?page=".concat(n,"&limit=").concat(e))}},{key:"createCity",value:function(n){return this.connectionService.post("admin/cities",n)}},{key:"updateCity",value:function(n,e){return this.connectionService.put("admin/cities/".concat(n),e)}},{key:"deleteCity",value:function(n){return this.connectionService.delete("admin/cities/".concat(n))}},{key:"getAreas",value:function(n,e){return this.connectionService.get("admin/areas?page=".concat(n,"&limit=").concat(e))}},{key:"createArea",value:function(n){return this.connectionService.post("admin/areas",n)}},{key:"updateArea",value:function(n,e){return this.connectionService.put("admin/areas/".concat(n),e)}},{key:"deleteArea",value:function(n){return this.connectionService.delete("admin/areas/".concat(n))}},{key:"getCityAreas",value:function(n,e,t){return this.connectionService.get("store/cities/".concat(n,"/areas?page=").concat(e,"&limit=").concat(t))}}]),n}();return n.ngInjectableDef=l.jc({factory:function(){return new n(l.kc(i.a))},token:n,providedIn:"root"}),n}()},Kka8:function(n,e,t){"use strict";t.r(e);var i=t("8Y7J"),l=function n(){_classCallCheck(this,n)},a=t("pMnS"),r=t("iInd"),c=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"ngOnInit",value:function(){}}]),n}(),s=i.Hb({encapsulation:2,styles:[],data:{}});function u(n){return i.fc(0,[(n()(),i.Jb(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),i.Ib(1,212992,null,0,r.q,[r.b,i.fb,i.m,[8,null],i.j],null,null)],(function(n,e){n(e,1,0)}),null)}var o,b=i.Fb("ngx-stats",c,(function(n){return i.fc(0,[(n()(),i.Jb(0,0,null,null,1,"ngx-stats",[],null,null,null,u,s)),i.Ib(1,114688,null,0,c,[],null,null)],(function(n,e){n(e,1,0)}),null)}),{},{},[]),d=t("jXVt"),f=t("tKwJ"),h=t("CcMi"),m=t("DjsD"),p=t("u50V"),g=t("vCDP"),v=t("4Esg"),T=t("ToIr"),y=((o=function(){function n(e,t){_classCallCheck(this,n),this.connectionService=e,this.userService=t}return _createClass(n,[{key:"getTopItems",value:function(n){return this.connectionService.get("".concat(this.userService.currentUser.role,"/items/top100?order_by=").concat(n))}}]),n}()).ngInjectableDef=i.jc({factory:function(){return new o(i.kc(T.a),i.kc(p.a))},token:o,providedIn:"root"}),o),S=function(){function n(e,t,i,l,a){_classCallCheck(this,n),this.statsService=e,this.router=t,this.helperService=i,this.pharmacyService=l,this.userService=a,this.source=new m.a,this.itemsList=[]}return _createClass(n,[{key:"ngOnInit",value:function(){this.getpageType(),this.getTopItems(),this.setTable()}},{key:"getpageType",value:function(){this.orderType=this.router.url.includes("searchs")?"search":"discount"}},{key:"getTopItems",value:function(){var n=this;this.isLoading=!0,this.statsService.getTopItems(this.orderType).subscribe((function(e){e.data&&(n.itemsList=e.data,n.itemsList.forEach((function(e){e.branchName=e.branch.name,e.storeName=e.store.name,e.storeId=e.store.id,e.name_ar="en"===n.lang?e.name_en:e.name_ar,e.cityName="en"===n.lang?e.city.name_en:e.city.name_ar,e.area_name_ar="en"===n.lang?e.city.area_name_en:e.city.area_name_ar})),n.isLoading=!1,n.source.load(n.itemsList))}))}},{key:"setTable",value:function(){this.lang=localStorage.getItem("lang"),this.tableSettings={pager:{perPage:20},edit:{editButtonContent:'<i class="nb-e-commerce"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmSave:!0},actions:{columnTitle:"ar"===this.lang?"\u0645\u0641\u0627\u062a\u064a\u062d":"Actions",add:!1,delete:!1,position:"right"},noDataMessage:"ar"===this.lang?"\u0644\u0645 \u0646\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a":"No data found",columns:{name_ar:{title:"ar"===this.lang?"\u0627\u0644\u0627\u0633\u0645":"Name",sort:!1,filter:!1,editable:!1},basic_price:{title:"ar"===this.lang?"\u0627\u0644\u0633\u0639\u0631":"Price",sort:!1,filter:!1,editable:!1},discount:{title:"ar"===this.lang?"\u0627\u0644\u062e\u0635\u0645":"Discount",sort:!1,filter:!1,editable:!1},storeName:{title:"ar"===this.lang?"\u0627\u0644\u0645\u0648\u0632\u0639":"Store",sort:!1,filter:!1,editable:!1,type:"html",valuePrepareFunction:function(n,e){return'<a target="_blank" href="'+window.location.origin+"/pharmacy/stores/"+e.storeId+'">'+n+"</a>"}},branchName:{title:"ar"===this.lang?"\u0627\u0644\u0641\u0631\u0639":"Branch",sort:!1,filter:!1,editable:!1},area_name_ar:{title:"ar"===this.lang?"\u0627\u0644\u0645\u0646\u0637\u0642\u0629":"Area",sort:!1,filter:!1,editable:!1},cityName:{title:"ar"===this.lang?"\u0627\u0644\u0645\u062f\u064a\u0646\u0629":"City",sort:!1,filter:!1,editable:!1}}};var n=this.userService.currentUser.role;"admin"===n?this.tableSettings.actions.edit=!1:"pharmacy"===n&&(this.tableSettings.columns.selectedQuantity={title:"ar"===this.lang?"\u0627\u0644\u0643\u0645\u064a\u0629":"Quantity",sort:!1,filter:!1,editor:{type:"text"}})}},{key:"buy",value:function(n){var e=this,t=n.newData;isNaN(t.selectedQuantity)?this.helperService.showTranslatedToast("warning","","Numbers Only"):this.pharmacyService.addToCart({quantity:t.selectedQuantity,item_id:t.id}).subscribe((function(t){n.confirm.resolve(n.data),e.helperService.showTranslatedToast("success","","Item added to cart")}))}}]),n}(),k=i.Hb({encapsulation:0,styles:[[""]],data:{}});function C(n){return i.fc(0,[(n()(),i.Jb(0,0,null,null,11,"nb-card",[],[[2,"size-tiny",null],[2,"size-small",null],[2,"size-medium",null],[2,"size-large",null],[2,"size-giant",null],[2,"status-primary",null],[2,"status-info",null],[2,"status-success",null],[2,"status-warning",null],[2,"status-danger",null],[2,"accent",null],[2,"accent-primary",null],[2,"accent-info",null],[2,"accent-success",null],[2,"accent-warning",null],[2,"accent-danger",null]],null,null,d.J,d.s)),i.Ib(1,49152,null,0,f.jb,[],null,null),(n()(),i.Jb(2,0,null,2,9,"div",[["class","p-lg-5 p-3"]],null,null,null,null,null)),(n()(),i.Jb(3,16777216,null,null,8,"div",[["nbSpinnerSize","giant"],["nbSpinnerStatus","primary"]],[[2,"nb-spinner-container",null]],null,null,null,null)),i.Ib(4,81920,null,0,f.qd,[i.fb,i.m,i.Q,i.q],{spinnerStatus:[0,"spinnerStatus"],spinnerSize:[1,"spinnerSize"],nbSpinner:[2,"nbSpinner"]},null),(n()(),i.Jb(5,0,null,null,6,"nb-card-body",[],null,null,null,d.I,d.r)),i.Ib(6,49152,null,0,f.ib,[],null,null),(n()(),i.Jb(7,0,null,0,4,"div",[["class","container-fluid"]],null,null,null,null,null)),(n()(),i.Jb(8,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(n()(),i.Jb(9,0,null,null,2,"div",[["class","col-12 overflow-auto"]],null,null,null,null,null)),(n()(),i.Jb(10,0,null,null,1,"ng2-smart-table",[],null,[[null,"editConfirm"]],(function(n,e,t){var i=!0;return"editConfirm"===e&&(i=!1!==n.component.buy(t)&&i),i}),h.b,h.a)),i.Ib(11,573440,null,0,m.s,[],{source:[0,"source"],settings:[1,"settings"]},{editConfirm:"editConfirm"})],(function(n,e){var t=e.component;n(e,4,0,"primary","giant",t.isLoading),n(e,11,0,t.source,t.tableSettings)}),(function(n,e){n(e,0,1,[i.Vb(e,1).tiny,i.Vb(e,1).small,i.Vb(e,1).medium,i.Vb(e,1).large,i.Vb(e,1).giant,i.Vb(e,1).primary,i.Vb(e,1).info,i.Vb(e,1).success,i.Vb(e,1).warning,i.Vb(e,1).danger,i.Vb(e,1).hasAccent,i.Vb(e,1).primaryAccent,i.Vb(e,1).infoAccent,i.Vb(e,1).successAccent,i.Vb(e,1).warningAccent,i.Vb(e,1).dangerAccent]),n(e,3,0,i.Vb(e,4).isSpinnerExist)}))}var _=i.Fb("ngx-top-items",S,(function(n){return i.fc(0,[(n()(),i.Jb(0,0,null,null,1,"ngx-top-items",[],null,null,null,C,k)),i.Ib(1,114688,null,0,S,[y,r.l,v.a,g.a,p.a],null,null)],(function(n,e){n(e,1,0)}),null)}),{},{},[]),I=t("SVse"),w=t("s7LF"),V=t("TYxm"),J=t("IheW"),j=t("TSSN"),N=t("YlHY"),A=t("QQfA"),D=t("IP0z"),z=function n(){_classCallCheck(this,n)},L=t("zMNK"),P=t("/HVE"),x=t("hOhj");t.d(e,"StatsModuleNgFactory",(function(){return M}));var M=i.Gb(l,[],(function(n){return i.Sb([i.Tb(512,i.m,i.rb,[[8,[a.a,b,_,d.k]],[3,i.m],i.H]),i.Tb(4608,I.n,I.m,[i.D,[2,I.G]]),i.Tb(4608,w.y,w.y,[]),i.Tb(4608,w.f,w.f,[]),i.Tb(4608,V.i,V.i,[]),i.Tb(4608,V.k,V.k,[J.c]),i.Tb(4608,V.c,V.c,[V.i,V.k]),i.Tb(5120,j.g,N.a,[J.c]),i.Tb(4608,j.d,j.f,[]),i.Tb(4608,j.i,j.e,[]),i.Tb(4608,j.c,j.b,[]),i.Tb(4608,j.k,j.k,[j.l,j.g,j.d,j.i,j.c,j.m,j.o,j.n,j.a]),i.Tb(4608,A.d,A.d,[A.i,A.e,i.m,A.h,A.f,i.z,i.J,I.c,D.b,[2,I.h]]),i.Tb(5120,A.j,A.k,[A.d]),i.Tb(1073742336,I.b,I.b,[]),i.Tb(1073742336,r.p,r.p,[[2,r.u],[2,r.l]]),i.Tb(1073742336,z,z,[]),i.Tb(1073742336,w.x,w.x,[]),i.Tb(1073742336,w.i,w.i,[]),i.Tb(1073742336,f.ke,f.ke,[]),i.Tb(1073742336,f.bc,f.bc,[f.ac]),i.Tb(1073742336,f.nb,f.nb,[]),i.Tb(1073742336,w.t,w.t,[]),i.Tb(1073742336,V.j,V.j,[]),i.Tb(1073742336,m.c,m.c,[]),i.Tb(1073742336,m.D,m.D,[]),i.Tb(1073742336,m.L,m.L,[]),i.Tb(1073742336,m.N,m.N,[]),i.Tb(1073742336,m.h,m.h,[]),i.Tb(1073742336,m.b,m.b,[]),i.Tb(1073742336,j.h,j.h,[]),i.Tb(1073742336,N.b,N.b,[]),i.Tb(1073742336,f.dc,f.dc,[]),i.Tb(1073742336,D.a,D.a,[]),i.Tb(1073742336,L.f,L.f,[]),i.Tb(1073742336,P.b,P.b,[]),i.Tb(1073742336,x.b,x.b,[]),i.Tb(1073742336,A.g,A.g,[]),i.Tb(1073742336,f.pb,f.pb,[]),i.Tb(1073742336,f.ob,f.ob,[]),i.Tb(1073742336,f.Cc,f.Cc,[]),i.Tb(1073742336,f.M,f.M,[]),i.Tb(1073742336,f.Bb,f.Bb,[]),i.Tb(1073742336,f.gd,f.gd,[]),i.Tb(1073742336,f.rd,f.rd,[]),i.Tb(1073742336,l,l,[]),i.Tb(1024,r.j,(function(){return[[{path:"",component:c,children:[{path:"",pathMatch:"full",redirectTo:"top-searchs"},{path:"top-searchs",component:S},{path:"top-discount",component:S}]}]]}),[]),i.Tb(256,j.o,!1,[]),i.Tb(256,j.m,void 0,[]),i.Tb(256,j.n,void 0,[]),i.Tb(256,j.a,void 0,[])])}))}}]);